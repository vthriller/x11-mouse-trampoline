#!/usr/bin/env python
import PIL.ImageGrab
import PIL.ImageTk
from tkinter import Tk, Frame, Canvas, NW
import Xlib
import Xlib.display

# TODO: is there a way to reuse X handle from Tk, or to supply our own? (Same for ImageGrab.)
display = Xlib.display.Display()
root = display.screen().root

img = PIL.ImageGrab.grab().reduce(4)

window = Tk()
window.resizable(False, False)

def jump(ev):
	root.warp_pointer(ev.x*4, ev.y*4)
	display.sync()

	window.quit()

tkimg = PIL.ImageTk.PhotoImage(img)

frame = Frame()
frame.pack()

canvas = Canvas(frame,
	width = img.size[0],
	height = img.size[1],
)
canvas.create_image(0, 0, anchor=NW, image=tkimg)
canvas.bind('<Button-1>', jump)
canvas.pack()

window.mainloop()
